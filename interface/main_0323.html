<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="x-ua-compatible" content="ie=edge">
	<link rel="icon" href="https://static.jianshukeji.com/hcode/images/favicon.ico">
	
	<style>#container {
		min-width: 380px;
		max-width: 600px;
		margin: 0 auto;
	}
	</style>	
	<script src="https://cdn.hcharts.cn/highcharts/highcharts.js"></script>
	<script src="https://img.hcharts.cn/highcharts/modules/exporting.js"></script>
	<script src="https://img.hcharts.cn/highcharts/modules/boost.js"></script>
	<script src="https://img.hcharts.cn/highcharts/modules/boost-canvas.js"></script>
	<script src="https://img.hcharts.cn/highcharts-plugins/highcharts-zh_CN.js"></script>
	
	<script src="https://cdn.hcharts.cn/jquery/jquery-1.8.3.min.js"></script>
	
</head>
<title>室内实时位置显示</title>
<body>
<!--
*************************************************************************
   Generated by HCODE at 2018-03-22 15:40:54
   From: https://code.hcharts.cn/demos/KBMsq6
*************************************************************************
 -->
	<div id="container"></div>

	<script>

		
		if (!Highcharts.Series.prototype.renderCanvas) {
			throw 'Module not loaded';
		}
		var charts=null;
		
		function requestData() {
			
			$.ajax({
				url: 'demo.cgi',
			
				success: function(pointStr) {
					var pointObj=JSON.parse(pointStr);  
					//alert(pointObj.point);
					charts.series[0].addPoint(pointObj.point, true, true);
					//charts.tooltip.refresh(pointObj.point);			

					// 一秒后继续调用本函数
					setTimeout(requestData, 500);
				},
				error: function(XMLRequestObject,errorInfo){
					alert("获取坐标数据失败\r\n"+"原因："+errorInfo);
				},
				cache: false
			});
			
		}
		
		$(document).ready(function() {
			
			charts = new Highcharts.chart({
				chart: {
					renderTo: 'container',
					zoomType: 'xy',
					height: '100%',
					events: {
						load:requestData
					}
				},
				boost: {
					useGPUTranslations: true,
					usePreAllocated: true
				},
				xAxis: {
					min: 0,
					max: 10,
					gridLineWidth: 1,
					title: {
						enabled: true,
						text: '<span style="font-size:large;padding-top:auto;">x坐标(单位：m)</span>'
					},
					labels: {  
						formatter: function () {  
							return this.value  
						},  
						style: {  
							color: '#000',  
							fontSize:'16px',  
							fontFamily:'微软雅黑'  
						}  
					}     
				},
				yAxis: {
					// Renders faster when we don't have to compute min and max
					min: 0,
					max: 10,
					minPadding: 0,
					maxPadding: 0,
					title: {
						enabled: true,
						text: '<span style="font-size:large;">y坐标(单位：m)</span>'
					},
					labels: {  
						formatter: function () {  
							return this.value  
						},  
						style: {  
							color: '#000',  
							fontSize:'16px',  
							fontFamily:'微软雅黑'  
						}  
					}      
				},
				title: {
					text: '室内实时位置显示'
				},
				subtitle:{
					text: '根据计算的x-y坐标显示当前位置'
				},

				/*tooltip: {
					formatter: function () {
						return '<b>声源位置</b><br/>x=, y='; 
					}
				},*/
				legend: {
					enabled: false
				},
				series: [{
					type: 'scatter',
					color: '#36648B',
					data: [[1, 3]],
					name: 'x-y坐标'
				}]
			});
			
		});
		
</script>
</body>
</html>
